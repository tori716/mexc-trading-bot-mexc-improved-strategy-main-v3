# MEXC REST API取引ボット - 全体仕様書

**Version:** 1.0.0  
**Last Updated:** 2025-05-30  
**Author:** Trading Bot Team  
**License:** MIT  

---

## 📋 目次

1. [プロジェクト概要](#1-プロジェクト概要)
2. [システム構成](#2-システム構成)
3. [戦略仕様](#3-戦略仕様)
4. [エントリー条件](#4-エントリー条件)
5. [エグジット条件](#5-エグジット条件)
6. [リスク管理](#6-リスク管理)
7. [REST API実装](#7-rest-api実装)
8. [テクニカル指標](#8-テクニカル指標)
9. [データ管理](#9-データ管理)
10. [監視・ログ](#10-監視ログ)
11. [パフォーマンス追跡](#11-パフォーマンス追跡)
12. [デプロイ設定](#12-デプロイ設定)
13. [テスト戦略](#13-テスト戦略)
14. [メンテナンス](#14-メンテナンス)

---

## 1. プロジェクト概要

### 1.1 プロジェクト名
**MEXC REST API高勝率アルトコイン取引ボット**

### 1.2 目的
WebSocket制限に対応したREST APIベースの自動取引システム。監視銘柄25個以内に最適化し、月利65%以上を目標とする高勝率アルトコイン短期取引戦略を実装。

### 1.3 目標パフォーマンス

| メトリクス | 目標値 |
|-----------|--------|
| 勝率 | ≥ 65% |
| 月間リターン | ≥ 65% |
| 最大ドローダウン | ≤ 15% |
| リスク・リワード比 | ≥ 1:2.2 |
| 取引頻度 | 2-3 取引/日 |
| シャープレシオ | ≥ 2.5 |

### 1.4 制約条件

- **API種類**: REST APIのみ（WebSocket制限対応）
- **監視銘柄**: 最大25銘柄
- **初期資金**: $1,000
- **更新頻度**: 5分間隔
- **地域制限**: 日本からの利用を考慮

---

## 2. システム構成

### 2.1 全体アーキテクチャ

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Data Layer    │    │  Strategy Layer │    │  Execution Layer│
├─────────────────┤    ├─────────────────┤    ├─────────────────┤
│ ・市場データ取得 │    │ ・シグナル生成   │    │ ・注文実行       │
│ ・価格履歴管理   │    │ ・リスク管理     │    │ ・ポジション管理 │
│ ・テクニカル分析 │    │ ・銘柄選定       │    │ ・決済実行       │
└─────────────────┘    └─────────────────┘    └─────────────────┘
           │                        │                        │
           └────────────┬───────────────────┬────────────────────┘
                        │                   │
              ┌─────────────────┐    ┌─────────────────┐
              │  Logging Layer  │    │ Monitoring Layer│
              ├─────────────────┤    ├─────────────────┤
              │ ・取引ログ       │    │ ・パフォーマンス │
              │ ・エラーログ     │    │ ・リアルタイム監視│
              │ ・パフォーマンス │    │ ・アラート機能   │
              └─────────────────┘    └─────────────────┘
```

### 2.2 主要クラス構成

#### 2.2.1 MEXCTradingBot（メインクラス）
**責任範囲:**
- API認証・通信管理
- 取引ロジック制御
- ポジション・リスク管理

**主要メソッド:**
- `run_trading_cycle()` - 取引サイクル実行
- `execute_trade()` - 取引実行
- `monitor_positions()` - ポジション監視
- `calculate_position_size()` - ポジションサイズ計算

#### 2.2.2 TechnicalIndicators（テクニカル分析）
**責任範囲:**
- 各種テクニカル指標計算
- カスタム指標実装

**主要メソッド:**
- `rsi(prices, period)` - RSI計算
- `bollinger_bands(prices, period, std_dev)` - ボリンジャーバンド
- `macd(prices, fast, slow, signal)` - MACD計算
- `ema(prices, period)` - 指数移動平均

#### 2.2.3 DataManager（データ管理）
**責任範囲:**
- 価格履歴管理
- K線データ処理
- 出来高データ保存

#### 2.2.4 RiskManager（リスク管理）
**責任範囲:**
- ポジションサイズ計算
- 損切り・利確管理
- 資金管理ルール

#### 2.2.5 OrderManager（注文管理）
**責任範囲:**
- 注文実行・管理
- 約定確認
- 注文履歴管理

---

## 3. 戦略仕様

### 3.1 銘柄選定戦略

#### 3.1.1 Tier分類システム（現在実装版）

**Tier 1（最優先銘柄・10銘柄）**
```
AVAX, LINK, NEAR, FTM, ATOM, DOT, MATIC, UNI, AAVE, DOGE
```
- **監視**: 常時監視
- **更新頻度**: 5分間隔（統一）
- **実装**: config.py TARGET_SYMBOLS_TIER1

**Tier 2（準優先銘柄・10銘柄）**
```
ADA, ALGO, APE, ARB, EGLD, FIL, GRT, ICP, LTC, SAND
```
- **監視**: 市場環境別ローテーション
- **更新頻度**: 5分間隔（統一）
- **実装**: config.py TARGET_SYMBOLS_TIER2

**Tier 3（補完銘柄・5銘柄）**
```
SHIB, VET, MANA, GALA, ONE
```
- **監視**: 条件付きローテーション
- **更新頻度**: 5分間隔（統一）
- **実装**: config.py TARGET_SYMBOLS_TIER3

#### 3.1.2 市場環境別選択ロジック（現在実装版）

| 市場環境 | 選択銘柄 | 合計 | 基準 | 実装 |
|---------|---------|------|------|------|
| **上昇相場** | 全Tier監視 | 25銘柄 | BTC重み付けスコア > 動的閾値 | strategy.py _determine_market_environment |
| **横ばい相場** | 全Tier監視 | 25銘柄 | 動的閾値内での横ばい | strategy.py _determine_market_environment |
| **下落相場** | 全Tier監視 | 25銘柄 | BTC重み付けスコア < -動的閾値 | strategy.py _determine_market_environment |

**動的閾値計算:**
```python
dynamic_threshold = min(max_threshold, max(min_threshold, base_threshold * volatility_multiplier))
```

#### 3.1.3 銘柄別最適化パラメータ（現在実装版）

**実装場所**: config.py COIN_SPECIFIC_ADJUSTMENTS

| 銘柄 | BB標準偏差 | RSI閾値調整 | MACD期間調整 | 価格変動率調整 | 出来高倍率調整 |
|------|-----------|------------|------------|-------------|-------------|
| **AVAX** | 2.2 | - | - | - | - |
| **LINK** | - | 58 (Long最適時間) | - | - | - |
| **NEAR** | - | - | 10 (Fast EMA) | - | - |
| **FTM** | - | - | - | 1.4 (Long最適時間) | - |
| **ATOM** | - | - | - | - | 1.8 (最適時間) |

**調整メソッド**: `strategy.py get_adjusted_param()`

**デフォルトパラメータ（現在実装版）:**
```yaml
# テクニカル指標設定
bb_period: 20
bb_std_dev: 2.0
rsi_period: 14
macd_fast_ema: 12
macd_slow_ema: 26
macd_signal_sma: 9
ema_periods: [20, 50]

# エントリー条件（最適時間帯）
rsi_threshold_long_optimized: 60
rsi_threshold_short_optimized: 35
price_change_rate_long: 1.5
price_change_rate_short: 1.3
volume_multiplier: 2.0

# エントリー条件（その他時間帯）
rsi_threshold_long_other: 65
rsi_threshold_short_other: 35
price_change_rate_other: 1.8
volume_multiplier_other: 3.0
```

---

## 4. エントリー条件

### 4.1 ロングポジション条件（現在実装版）

#### 4.1.1 必須条件（全て満たす必要あり）

**実装**: `strategy.py _check_long_entry_conditions()`

**✅ ボラティリティブレイクアウト**
- 現在価格 > ボリンジャーバンド上限
- 30分価格変動率 > (動的係数 × 平均価格変動率 × 100)
- 係数: 最適時間帯1.5、その他時間帯1.8

**✅ モメンタム確認（全て必須）**
- 5分足RSI > 設定閾値 AND RSI上昇中
- 15分足MACD > MACDシグナル
- 1時間足 EMA20 > EMA50
- RSI閾値: 最適時間帯60、その他時間帯65

**✅ 出来高確認（いずれか）**
- 直近出来高 > 24h平均出来高 × 倍率
- OR 3本連続出来高増加
- 倍率: 最適時間帯2.0、その他時間帯3.0

**✅ 市場環境確認**
- BTC急落中でない（15分間で3%以上下落なし）
- エントリーフィルター通過（有効時）

### 4.2 ショートポジション条件（現在実装版）

#### 4.2.1 必須条件（全て満たす必要あり）

**実装**: `strategy.py _check_short_entry_conditions()`

**✅ ボラティリティブレイクアウト**
- 現在価格 < ボリンジャーバンド下限
- 30分価格変動率 < -(動的係数 × 平均価格変動率 × 100)
- 係数: 最適時間帯1.3、その他時間帯1.8

**✅ モメンタム確認（全て必須）**
- 5分足RSI < 設定閾値 AND RSI下降中
- 15分足MACD < MACDシグナル
- 1時間足 EMA20 < EMA50
- RSI閾値: 全時間帯35

**✅ 出来高確認（いずれか）**
- 直近出来高 > 24h平均出来高 × 倍率
- OR 3本連続出来高増加
- 倍率: 最適時間帯2.0、その他時間帯3.0

**✅ 市場環境確認**
- BTC急騰中でない（15分間で3%以上上昇なし）
- エントリーフィルター通過（有効時）

### 4.3 時間帯最適化（現在実装版）

#### 4.3.1 最適取引時間帯（JST）

**実装**: `config.py OPTIMIZED_TRADING_HOURS`

- **15:00-18:00** (アジア・ヨーロッパオーバーラップ)
- **22:00-24:00** (米国市場オープン)

#### 4.3.2 時間帯別パラメータ調整（現在実装版）

**実装**: `strategy.py _is_optimized_trading_hours()`

**最適時間帯:**
```python
rsi_threshold_long: 60
rsi_threshold_short: 35  
price_change_rate_long: 1.5
price_change_rate_short: 1.3
volume_multiplier: 2.0
```

**非最適時間帯:**
```python
rsi_threshold_long: 65  # より厳しい条件
rsi_threshold_short: 35 # 変更なし
price_change_rate: 1.8  # より厳しい条件
volume_multiplier: 3.0  # より厳しい条件
```

---

## 5. エグジット条件（現在実装版）

### 5.1 利益確定戦略

#### 5.1.1 段階的利益確定（現在実装版）

**実装**: `strategy.py _check_take_profit()`

**第1段階利益確定**
- **利益目標**: 2.4% (TAKE_PROFIT_PERCENTAGE_PHASE1)
- **実行**: 即座に決済
- **説明**: 手数料考慮の最小確実利益

**第2段階利益確定（複数オプション）**
- **オプション1**: 5.0%利益到達 (TAKE_PROFIT_PERCENTAGE_PHASE2_OPTION1)
- **オプション3**: 3.0%利益到達 (TAKE_PROFIT_PERCENTAGE_PHASE2_OPTION3)

#### 5.1.2 トレーリングストップ（現在実装版）

**実装**: `strategy.py _check_trailing_stop()`

- **発動条件**: 利益 > 2.4% (TRAILING_STOP_ACTIVATION_PERCENTAGE)
- **逆行率**: 1.5% (TRAILING_STOP_PERCENTAGE)
- **ロジック**: 最高利益からの逆行で決済

### 5.2 損切り戦略（現在実装版）

#### 5.2.1 プログレッシブストップロス（改善版）

**実装**: `strategy.py _check_stop_loss()` 

**段階的損切り設定**:
- **15分経過**: 0.8%損失で発動
- **30分経過**: 1.2%損失で発動  
- **60分経過**: 1.5%損失で発動

**新しい制約条件**:
- **最小保有時間**: 5分 (MINIMUM_HOLDING_TIME_MINUTES)
- **最小損失額**: $0.50 (MINIMUM_LOSS_AMOUNT_USD)
- **手数料込み損失額**: 実際の損失額で判定

#### 5.2.2 固定損切り（改善版）
- **損切り率**: 1.5% (FIXED_STOP_LOSS_PERCENTAGE)
- **最小保有時間制約**: 5分経過後のみ発動
- **最小損失額制約**: $0.50以上の損失時のみ

#### 5.2.3 時間ベース損切り（改善版）
- **時間制限**: 45分 (TIME_BASED_STOP_LOSS_MINUTES)
- **利益閾値**: 0.5%未満 (TIME_BASED_STOP_LOSS_PROFIT_THRESHOLD)
- **微小損失**: $0.50未満は連続損失カウントなし

#### 5.2.4 テクニカル損切り（改善版）
- **MACD逆転**: 最小保有時間経過後のみ
- **BBミドルライン**: 閾値0.5%、確認キャンドル2本
- **最小損失額制約**: 全テクニカル損切りに適用

#### 5.2.5 緊急損切り（改善版）
- **条件**: BTC 15分間で3%以上下落
- **対象**: ロングポジションのみ
- **実際損失額**: $0.50以上で連続損失カウント

---

## 6. リスク管理（現在実装版）

### 6.1 ポジションサイジング

#### 6.1.1 基本計算式（現在実装版）

**実装**: `strategy.py _execute_trade_and_update_capital()`

```python
trade_amount_usd = current_capital × (position_size_percentage / 100)
quantity = trade_amount_usd / entry_price
```

#### 6.1.2 基本設定（現在実装版）

| パラメータ | 値 | 実装 | 説明 |
|-----------|----|----- |----- |
| 基本リスク/取引 | 5% | POSITION_SIZE_PERCENTAGE | 1取引あたりの基本リスク |
| 最小取引サイズ | $10 | MINIMUM_TRADE_SIZE_USD | 最小取引金額（新実装） |
| 最大同時ポジション | 2 | MAX_SIMULTANEOUS_POSITIONS | 同時保有ポジション数 |
| 連続エントリー制限 | 2回/24h | MAX_CONSECUTIVE_ENTRIES_SAME_COIN | 同一銘柄制限 |

#### 6.1.3 連続損失調整（現在実装版）

**実装**: `strategy.py _execute_trade_and_update_capital()`

| 連続損失回数 | ポジションサイズ | 説明 |
|-------------|----------------|------|
| 0回 | 5.0% | 通常サイズ |
| 1回 | 5.0% | 変更なし |
| 2回 | 2.5% | サイズ半減 |
| 3回以上 | 取引停止 | 翌日まで待機 |

**改善点**:
- **実質損失額判定**: $0.50以上の損失のみカウント
- **連続損失閾値**: 設定可能 (CONSECUTIVE_LOSS_THRESHOLD)

### 6.2 資金管理（現在実装版）

#### 6.2.1 基本設定（現在実装版）

**実装**: `config.py` & `strategy.py`

- **初期資金**: $1,000 (INITIAL_CAPITAL_USD)
- **テストモード**: 完全シミュレーション
- **資金追跡**: リアルタイム更新

#### 6.2.2 手数料管理（現在実装版）

**実装**: `strategy.py _close_position()`

- **手数料率**: 0.1% × 2 = 0.2% (往復)
- **手数料計算**: 決済時に実際の取引金額で計算
- **利益への影響**: 手数料込みで損益計算

### 6.3 分散投資ルール（現在実装版）

**実装**: `strategy.py` 複数のメソッド

- **最大同時ポジション**: 2 (MAX_SIMULTANEOUS_POSITIONS)
- **同一銘柄連続エントリー**: 24時間以内最大2回
- **エントリーフィルター**: 有効時は追加制限
- **Tier制限**: 実装なし（全Tier同等扱い）

---

## 7. REST API実装（現在実装版）

### 7.1 主要エンドポイント（現在実装版）

#### 7.1.1 実装済みエンドポイント

**実装**: `mexc_api.py`

| エンドポイント | メソッド | 実装メソッド | 説明 |
|-------------|---------|------------|------|
| `/api/v3/time` | GET | `get_server_time()` | サーバー時刻 |
| `/api/v3/exchangeInfo` | GET | `get_exchange_info()` | 取引所情報 |
| `/api/v3/ticker/price` | GET | `get_ticker_price()` | 最新価格 |
| `/api/v3/klines` | GET | `get_klines()` | K線データ |
| `/api/v3/order` | POST | `place_order()` | 新規注文 |

#### 7.1.2 時間足マッピング（現在実装版）

**実装**: `mexc_api.py get_klines()`

```python
interval_map = {
    "Min1": "1m",      # 1分足
    "Min5": "5m",      # 5分足  
    "Min15": "15m",    # 15分足
    "Min30": "30m",    # 30分足
    "Min60": "60m",    # 60分足
    "Min240": "4h",    # 4時間足
    "1h": "60m",       # 1時間足(エイリアス)
    "4h": "4h",        # 4時間足(エイリアス)
    "1d": "1d"         # 日足
}
```

### 7.2 ポーリング戦略（現在実装版）

#### 7.2.1 更新頻度（現在実装版）

**実装**: `strategy.py start_live_trading()` / `start_paper_trading()`

| データ種類 | 頻度 | 対象 | 実装メソッド |
|-----------|------|------|------------|
| 市場データ更新 | 5分 | 全25銘柄 | `run_trading_cycle()` |
| ポジション監視 | 5分 | オープンポジション | `_check_and_execute_exit()` |
| 価格表示 | 10秒 | 設定銘柄 | `_display_prices()` |
| 日次レポート | 0:00 JST | 全体 | 日次スケジュール |

**統一更新間隔**: 全データ5分間隔で統一

### 7.3 エラーハンドリング（現在実装版）

#### 7.3.1 エラーハンドリング実装

**実装**: `mexc_api.py _send_request()`

**ClientResponseError (HTTP エラー)**:
- **ログ出力**: 詳細なエラー情報
- **Discord通知**: エラー概要
- **戻り値**: None（エラー時）

**ClientError (ネットワークエラー)**:
- **ログ出力**: ネットワークエラー詳細
- **Discord通知**: 接続問題通知
- **戻り値**: None（エラー時）

**予期せぬエラー**:
- **ログ出力**: 完全なエラー情報
- **Discord通知**: システムエラー通知
- **戻り値**: None（エラー時）

**リトライ機構**: 現在未実装（今後の改善点）

### 7.4 データキャッシュ（現在実装版）

#### 7.4.1 市場データキャッシュ

**実装**: `mexc_api.py`

```python
self.market_data = {}    # リアルタイム市場データ
self.ohlcv_data = {}     # OHLCVデータ
```

**構造**:
- **market_data**: `{"BTCUSDT": {"price": 0, "volume": 0}}`
- **ohlcv_data**: `{"BTCUSDT": {"5m": [], "15m": [], "1h": []}}`

#### 7.4.2 API応答キャッシュ設定

**設定**: `config.py`

- **キャッシュ期間**: 5秒 (API_CACHE_DURATION_SECONDS)
- **最大同時呼び出し**: 3 (MAX_CONCURRENT_API_CALLS)
- **実装状況**: 基本設定のみ（詳細実装は今後）

---

## 8. テクニカル指標

### 8.1 RSI (Relative Strength Index)

**計算式:**
```
RSI = 100 - (100 / (1 + RS))
RS = 平均上昇幅 / 平均下降幅
```

**パラメータ:**
- **期間**: 14
- **買われ過ぎ**: 70
- **売られ過ぎ**: 30
- **実装**: 標準指数平滑化

### 8.2 ボリンジャーバンド

**計算:**
- **期間**: 20
- **標準偏差**: 2.0
- **中央線**: 単純移動平均
- **上限**: 中央線 + (標準偏差 × 倍率)
- **下限**: 中央線 - (標準偏差 × 倍率)

### 8.3 MACD

**パラメータ:**
- **高速EMA**: 12
- **低速EMA**: 26
- **シグナル線**: 9

**計算:**
- **MACDライン**: EMA(12) - EMA(26)
- **シグナルライン**: EMA(9) of MACDライン
- **ヒストグラム**: MACDライン - シグナルライン

### 8.4 EMA (指数移動平均)

**計算式:**
```
EMA = (価格 × α) + (前回EMA × (1 - α))
α = 2 / (期間 + 1)
```

**使用期間:**
- 20期間
- 50期間

---

## 9. データ管理

### 9.1 データ構造

#### 9.1.1 価格履歴
```python
price_history: List[float]  # 終値データ
max_length: 100            # 最大保持数
```

#### 9.1.2 出来高履歴
```python
volume_history: List[float]  # 出来高データ
max_length: 100             # 最大保持数
```

#### 9.1.3 K線データ
```python
{
    'timestamp': int,    # タイムスタンプ
    'open': float,       # 始値
    'high': float,       # 高値
    'low': float,        # 安値
    'close': float,      # 終値
    'volume': float      # 出来高
}
```

#### 9.1.4 取引履歴
```python
{
    'symbol': str,           # 銘柄
    'direction': str,        # 方向 (long/short)
    'entry_price': float,    # エントリー価格
    'exit_price': float,     # エグジット価格
    'quantity': float,       # 数量
    'pnl_percentage': float, # 損益率
    'pnl_amount': float,     # 損益金額
    'reason': str,           # 決済理由
    'timestamp': float       # タイムスタンプ
}
```

### 9.2 更新メカニズム

#### 9.2.1 価格データ
- **頻度**: 5分毎
- **方法**: スライディングウィンドウ更新
- **保持期間**: 最新100データポイント

#### 9.2.2 市場環境
- **分析頻度**: 毎サイクル
- **基準**: BTCトレンド分析
- **更新トリガー**: 大幅な変化時

---

## 10. 監視・ログ

### 10.1 ログレベル

#### 10.1.1 INFO
- 取引実行
- ポジション開始・決済
- パフォーマンス更新

#### 10.1.2 WARNING
- API制限接近
- 異常な市場変動
- リスク制限接近

#### 10.1.3 ERROR
- API接続失敗
- 注文実行失敗
- 予期しないエラー

### 10.2 ログファイル

| ファイル名 | 内容 |
|-----------|------|
| `trading_bot.log` | メインログ |
| `error.log` | エラーログ |
| `trades.log` | 取引ログ |
| `performance.log` | パフォーマンスログ |

### 10.3 リアルタイム監視

#### 10.3.1 監視メトリクス
- アクティブポジション数
- 日次取引回数
- 現在のドローダウン
- 連続損失回数
- API応答時間

#### 10.3.2 アラートレベル

**高優先度:**
- 最大ドローダウン到達
- 連続損失3回
- API接続失敗

**中優先度:**
- 異常な市場変動
- リスク制限接近

**低優先度:**
- 日次目標達成
- 新規ポジション開始

---

## 11. パフォーマンス追跡

### 11.1 主要メトリクス

#### 11.1.1 収益性指標
```python
total_return = ((current_capital - initial_capital) / initial_capital) × 100
monthly_return = "月次リターン"
daily_return = "日次リターン"
```

#### 11.1.2 リスク指標
```python
win_rate = (winning_trades / total_trades) × 100
profit_factor = total_profit / total_loss
max_drawdown = "最大資産減少率"
sharpe_ratio = (return - risk_free_rate) / volatility
```

#### 11.1.3 取引指標
```python
average_win = "勝ちトレードの平均利益率"
average_loss = "負けトレードの平均損失率"
risk_reward_ratio = average_win / average_loss
trade_frequency = "1日あたりの取引回数"
```

### 11.2 レポート

#### 11.2.1 リアルタイム
- 現在のP&L
- オープンポジション
- 日次統計

#### 11.2.2 日次
- 日次パフォーマンス要約
- 取引履歴
- リスクメトリクス

#### 11.2.3 週次
- 週次パフォーマンス分析
- 戦略効果測定
- パラメータ最適化提案

---

## 12. デプロイ設定

### 12.1 環境設定

#### 12.1.1 開発環境
- **APIキー**: demo/testnet
- **資金**: $100
- **ログレベル**: DEBUG
- **取引実行**: 無効

#### 12.1.2 ステージング環境
- **APIキー**: demo/testnet
- **資金**: $1,000
- **ログレベル**: INFO
- **取引実行**: 無効

#### 12.1.3 本番環境
- **APIキー**: live
- **資金**: $1,000
- **ログレベル**: INFO
- **取引実行**: 有効

### 12.2 依存関係

#### 12.2.1 Python要件
- **Python**: >=3.8

#### 12.2.2 必須パッケージ
```
aiohttp>=3.8.0
pandas>=1.3.0
numpy>=1.21.0
asyncio
logging
json
time
hmac
hashlib
```

### 12.3 セキュリティ

#### 12.3.1 認証
- **APIキー保存**: 環境変数
- **署名方式**: HMAC-SHA256
- **リクエスト署名**: 認証エンドポイントで必須

### 12.4 バックアップ・復旧

#### 12.4.1 バックアップ
- **頻度**: 日次
- **対象**: 取引履歴、パフォーマンスメトリクス、設定

#### 12.4.2 復旧手順
1. 設定復元
2. 取引履歴読み込み
3. ポジション再計算
4. 監視再開

---

## 13. テスト戦略

### 13.1 単体テスト

#### 13.1.1 テクニカル指標
- RSI計算精度
- ボリンジャーバンド計算
- MACD計算
- EMA計算

#### 13.1.2 リスク管理
- ポジションサイズ計算
- 損切り計算
- リスク調整ロジック

#### 13.1.3 取引ロジック
- エントリー条件評価
- エグジット条件評価
- 市場環境分析

### 13.2 統合テスト

#### 13.2.1 API通信
- REST API接続性
- 認証
- データ取得
- 注文実行（デモ）

#### 13.2.2 エンドツーエンド
- 完全な取引サイクル
- エラーハンドリング
- パフォーマンス追跡

### 13.3 バックテスト

#### 13.3.1 履歴データ
- **期間**: 過去6ヶ月
- **銘柄**: 全Tier 1銘柄
- **時間枠**: 5分足データ

#### 13.3.2 検証メトリクス
- 勝率 >= 65%
- 月間リターン >= 65%
- 最大ドローダウン <= 15%
- シャープレシオ >= 2.5

---

## 14. メンテナンス

### 14.1 定期メンテナンス

#### 14.1.1 日次
- ログファイル確認
- パフォーマンス確認
- API接続状況確認

#### 14.1.2 週次
- パラメータ最適化評価
- 銘柄ローテーション見直し
- リスク設定調整

#### 14.1.3 月次
- 戦略有効性評価
- 市場環境変化対応
- システム全体見直し

### 14.2 更新手順

#### 14.2.1 パラメータ更新
1. A/Bテスト実施
2. 段階的ロールアウト
3. パフォーマンス監視

#### 14.2.2 コード更新
1. テスト環境での検証
2. 段階的デプロイ
3. ロールバック準備

### 14.3 監視アラート

#### 14.3.1 パフォーマンス低下
- **トリガー**: 勝率 < 60% (1週間)
- **アクション**: パラメータ見直し・一時停止

#### 14.3.2 API問題
- **トリガー**: API失敗率 > 10%
- **アクション**: 接続設定見直し・代替手段検討

#### 14.3.3 市場変化
- **トリガー**: 戦略効果低下
- **アクション**: 戦略調整・新戦略検討

---

## 📞 サポート・連絡先

**技術的な問題**: GitHub Issues  
**一般的な質問**: Email サポート  
**緊急事態**: アラートシステム経由  

---

**© 2025 Trading Bot Team. All rights reserved.**